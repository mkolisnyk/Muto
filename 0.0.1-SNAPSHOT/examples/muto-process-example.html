<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia at Jun 7, 2014 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Muto Process Examples</title>
    <style type="text/css" media="all">
      @import url("../css/maven-base.css");
      @import url("../css/maven-theme.css");
      @import url("../css/site.css");
    </style>
    <link rel="stylesheet" href="../css/print.css" type="text/css" media="print" />
      <meta name="author" content="Myk Kolisnyk" />
    <meta name="Date-Creation-yyyymmdd" content="20140604" />
    <meta name="Date-Revision-yyyymmdd" content="20140607" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                    <div id="bannerLeft">
                Muto
                </div>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
        
                <div class="xleft">
        <span id="publishDate">Last Published: 2014-06-07</span>
                  &nbsp;| <span id="projectVersion">Version: 0.0.1-SNAPSHOT</span>
                      </div>
            <div class="xright">        
        
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
        
                                <h5>Overview</h5>
                  <ul>
                  <li class="none">
                          <a href="../index.html" title="Introduction">Introduction</a>
            </li>
                  <li class="none">
                          <a href="../plugin-info.html" title="Goals">Goals</a>
            </li>
                  <li class="none">
                          <a href="../usage.html" title="Usage">Usage</a>
            </li>
                  <li class="none">
                          <a href="../faq.html" title="FAQ">FAQ</a>
            </li>
          </ul>
                       <h5>Examples</h5>
                  <ul>
                  <li class="none">
            <strong>Muto Processing Example</strong>
          </li>
                  <li class="none">
                          <a href="../examples/muto-reporting-example.html" title="Muto Reporting Example">Muto Reporting Example</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                                                                                                            <li class="collapsed">
                          <a href="../project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                                                                                                                                                                                                                            <li class="collapsed">
                          <a href="../project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                   
        
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2>Overview<a name="Overview"></a></h2><p>The <b>muto:process</b> goal performs mutation testing of the current project code. During execution it goes through the following stages:</p><ul><li><b>Workspace creation</b> - creates folder where current project is copied to. This is done to minimize probability of committing mutation after testing.</li><li><b>Mutation generation</b> - based on rules specified the Muto applies changes to the code in the workspace.</li><li><b>Command execution</b> - normally that should be a command running tests against mutated code.</li><li><b>Initial state restoration</b> - after testing is done and reports are generated the initial state is to be restored.</li><li><b>Workspace cleanup</b> - once all runs are done the workspace is cleaned up.<p>The final result is the report containing information about all mutations applied and results collected.</p></li></ul></div><div class="section"><h2>Parameters to specify<a name="Parameters_to_specify"></a></h2></div><div class="section"><h2>Running Muto Processor<a name="Running_Muto_Processor"></a></h2><div class="section"><h3>Maven Configuration<a name="Maven_Configuration"></a></h3><p>The sample <b>pom.xml</b> fragment shows how to generate such report:</p><div class="source"><pre>&lt;project&gt;
        ...
        &lt;build&gt;
                &lt;plugins&gt;
                        &lt;plugin&gt;
                                &lt;groupId&gt;com.github.mkolisnyk&lt;/groupId&gt;
                                &lt;artifactId&gt;muto&lt;/artifactId&gt;
                                &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
                                &lt;configuration&gt;
                                        &lt;sourceDirectory&gt;.&lt;/sourceDirectory&gt;
                                        &lt;targetDirectory&gt;target/muto/workspace&lt;/targetDirectory&gt;
                                        &lt;runCommand&gt;mvn compile test&lt;/runCommand&gt;
                                        &lt;testReportsLocation&gt;target/muto/workspace/target/surfire&lt;/testReportsLocation&gt;
                                        &lt;outputDirectory&gt;target/muto&lt;/outputDirectory&gt;
                                &lt;/configuration&gt;
                        &lt;/plugin&gt;
                        ...
                &lt;/plugins&gt;
        &lt;/build&gt;
        ...
&lt;/project&gt;
</pre></div></div></div><div class="section"><h2>Customize Muto Processing<a name="Customize_Muto_Processing"></a></h2><div class="section"><h3>Restrict initial file set to process<a name="Restrict_initial_file_set_to_process"></a></h3><p>By default the engine copies all current project content into separate working directory. But project folder may contain some auxiliary folders like <b>.git</b> or <b>.svn</b> or some temporary stuff like <b>target</b>, <b>bin</b> etc. These resources are not really needed in the workspace so it would be good to avoid such directories from being copied into the workspace. For such optimization there are <b>excludes</b> and <b>includes</b> parameters. They specify the list of inclusion/exclusion patterns.</p><p>The below configuration will copy all <b>*.java</b> files into workspace folder while <b>.git</b>, <b>target</b> and <b>src/site</b> folders will be excluded. The <b>pom.xml</b> fragment looks like: </p><div class="source"><pre>&lt;project&gt;
        ...
        &lt;build&gt;
                &lt;plugins&gt;
                        &lt;plugin&gt;
                                &lt;groupId&gt;com.github.mkolisnyk&lt;/groupId&gt;
                                &lt;artifactId&gt;muto&lt;/artifactId&gt;
                                &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
                                &lt;configuration&gt;
                                        &lt;sourceDirectory&gt;.&lt;/sourceDirectory&gt;
                                        &lt;targetDirectory&gt;target/muto/workspace&lt;/targetDirectory&gt;
                                        &lt;excludes&gt;
                                                &lt;exclude&gt;\\.git&lt;/exclude&gt;
                                        &lt;exclude&gt;target&lt;/exclude&gt;
                                        &lt;exclude&gt;src/site&lt;/exclude&gt;
                                        &lt;excludes&gt;
                                        &lt;includes&gt;
                                                &lt;include&gt;(.*).java&lt;/include&gt;
                                        &lt;includes&gt;

                                        &lt;runCommand&gt;mvn compile test&lt;/runCommand&gt;
                                        &lt;testReportsLocation&gt;target/muto/workspace/target/surfire&lt;/testReportsLocation&gt;
                                        &lt;outputDirectory&gt;target/muto&lt;/outputDirectory&gt;
                                &lt;/configuration&gt;
                        &lt;/plugin&gt;
                        ...
                &lt;/plugins&gt;
        &lt;/build&gt;
        ...
&lt;/project&gt;
</pre></div></div><div class="section"><h3>Restricting the set of tests to run<a name="Restricting_the_set_of_tests_to_run"></a></h3><p>In some cases we're interested just in some specific tests to run against the mutated version. Actually, this is the same as if we run those tests from command line. So, normally we can restrict out test suite by:</p><ul><li>groups/categories</li><li>File/Class names</li><li>File patterns <p>So, actually, we need to run specific command line for the build engine which we use to run our tests. Something like:</p><div class="source"><pre>&lt;project&gt;
        ...
        &lt;build&gt;
                &lt;plugins&gt;
                        &lt;plugin&gt;
                                &lt;groupId&gt;com.github.mkolisnyk&lt;/groupId&gt;
                                &lt;artifactId&gt;muto&lt;/artifactId&gt;
                                &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
                                &lt;configuration&gt;
                                        ...
                                        &lt;runCommand&gt;mvn compile test -Dcategory=regression&lt;/runCommand&gt;
                                        ...
                                &lt;/configuration&gt;
                        &lt;/plugin&gt;
                        ...
                &lt;/plugins&gt;
        &lt;/build&gt;
        ...
&lt;/project&gt;
</pre></div></li></ul></div><div class="section"><h3>Identifying the lists of mutations to apply<a name="Identifying_the_lists_of_mutations_to_apply"></a></h3><p>By default all built-in mutation types are applied during mutation testing suite execution. But in some cases we need some specific rules to be used. Also, since Muto is extensible engine, there may be a need to create some custom mutation rules/strategies. Naturally, we'd like to see them running as well.</p><p>For this purpose the plugin configuration has entries like:</p><ul><li>mutationRules - contains the list of class names corresponding to mutation rules</li><li>mutationStrategies - contains the list of class names representing mutation insertion strategies</li><li>fileStrategies - contains the list of class names representing file processing strategies<p>Each of them can be customized to fit exact mutation approach you really need. Here is the example of Maven configuration defining mutation related attributes:</p><div class="source"><pre>&lt;project&gt;
        ...
        &lt;build&gt;
                &lt;plugins&gt;
                        &lt;plugin&gt;
                &lt;groupId&gt;com.github.mkolisnyk&lt;/groupId&gt;
                &lt;artifactId&gt;muto&lt;/artifactId&gt;
                &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
                &lt;configuration&gt;
                                        ...
                                        &lt;fileStrategies&gt;
                                                &lt;fileStrategy&gt;com.github.mkolisnyk.muto.generator.filestrategies.OneByOneFileProcessingStrategy&lt;/fileStrategy&gt;
                                        &lt;/fileStrategies&gt;
                                        &lt;mutationStrategies&gt;
                                                &lt;mutationStrategy&gt;com.github.mkolisnyk.muto.generator.strategies.OneByOneMutationStrategy&lt;/mutationStrategy&gt;
                                        &lt;/mutationStrategies&gt;
                                        &lt;mutationRules&gt;
                                                &lt;mutationRule&gt;com.github.mkolisnyk.muto.generator.rules.BlockCleanMutationRule&lt;/mutationRule&gt;
                                                &lt;mutationRule&gt;com.github.mkolisnyk.muto.generator.rules.NumberSignMutationRule&lt;/mutationRule&gt;
                                        &lt;/mutationRules&gt;
                                        ...
                &lt;/configuration&gt;
            &lt;/plugin&gt;
                        ...
                &lt;/plugins&gt;
        &lt;/build&gt;
        ...
&lt;/project&gt;
</pre></div><p><b>NOTE:</b> if there's a need to apply some custom mutation attributes which are out of scope of standard set of classes we should make sure those classes are included into classpath.</p></li></ul></div><div class="section"><h3>Identifying the set of files to apply mutations to<a name="Identifying_the_set_of_files_to_apply_mutations_to"></a></h3><p>In some cases we need to apply mutations to specific set of files, not the entire suite. This can be done by identifying <b>includes</b> attribute. When engine runs it takes <b>includes</b> information to identify the list of files to process.</p><div class="source"><pre>&lt;project&gt;
        ...
        &lt;build&gt;
                &lt;plugins&gt;
                        &lt;plugin&gt;
                                &lt;groupId&gt;com.github.mkolisnyk&lt;/groupId&gt;
                                &lt;artifactId&gt;muto&lt;/artifactId&gt;
                                &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
                                &lt;configuration&gt;
                                        ...
                                        &lt;includes&gt;
                                                &lt;include&gt;(.*)Strategy.java&lt;/include&gt;
                                        &lt;includes&gt;
                                        ...
                                &lt;/configuration&gt;
                        &lt;/plugin&gt;
                        ...
                &lt;/plugins&gt;
        &lt;/build&gt;
        ...
&lt;/project&gt;
</pre></div><p>After such settings all mutations will be applied only to files matchine the <b>(.*)Strategy.java</b> pattern</p></div><div class="section"><h3>Customizing results output<a name="Customizing_results_output"></a></h3><p>By default no output is done. But all reporting functionality is concentrated inside listeners. If we want to make XML output or just simply write results into the console we should define <b>listeners</b> attribute. Here is an example of it:</p><div class="source"><pre>&lt;project&gt;
        ...
        &lt;build&gt;
                &lt;plugins&gt;
                        &lt;plugin&gt;
                                &lt;groupId&gt;com.github.mkolisnyk&lt;/groupId&gt;
                                &lt;artifactId&gt;muto&lt;/artifactId&gt;
                                &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
                                &lt;configuration&gt;
                                        ...
                                        &lt;listeners&gt;
                                                &lt;listener&gt;com.github.mkolisnyk.muto.reporter.listeners.ConsoleListener&lt;/listener&gt;
                                                &lt;listener&gt;com.github.mkolisnyk.muto.reporter.listeners.XmlListener&lt;/listener&gt;
                                        &lt;listeners&gt;
                                        ...
                                &lt;/configuration&gt;
                        &lt;/plugin&gt;
                        ...
                &lt;/plugins&gt;
        &lt;/build&gt;
        ...
&lt;/project&gt;
</pre></div><p>Such instruction will produce both console and XML output.</p></div></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                   2014.
          All Rights Reserved.      
        
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
